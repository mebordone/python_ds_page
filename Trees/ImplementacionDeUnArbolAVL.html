<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>6.18. Implementación de un árbol AVL &#8212; Solución de problemas con algoritmos y estructuras de datos</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.0.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css?v=2F3E13EE" />
    <link rel="stylesheet" type="text/css" href="../_static/js_lib/prettify.css?v=2A364B6B" />
    <link rel="stylesheet" type="text/css" href="../_static/video.css?v=-1AC7A4C5" />
    <link rel="stylesheet" type="text/css" href="../_static/pytutor.css?v=239FC54E" />
    <link rel="stylesheet" type="text/css" href="../_static/modal-basic.css?v=-75E5BD1C" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css?v=-46455F2F" />
    <link rel="stylesheet" type="text/css" href="../_static/fitb.css?v=3BA0E63E" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=-6EF20E1F" />
    <link rel="stylesheet" type="text/css" href="../_static/codemirror.css?v=1CE53237" />
    <link rel="stylesheet" type="text/css" href="../_static/datafile.css?v=-3E7B1476" />
    <link rel="stylesheet" type="text/css" href="../_static/tabbedstuff.css?v=424F1CC9" />
    <link rel="stylesheet" type="text/css" href="../_static/reveal.css?v=4A81D381" />
    <link rel="stylesheet" type="text/css" href="../_static/showEval.css?v=C6382F3" />
    <link rel="stylesheet" type="text/css" href="../_static/activecode.css?v=-B8E06A5" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=-7F7467D6" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/clickable.css?v=58C4E18A" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css?v=-1DDF53CD" />
    <link rel="stylesheet" href="../_static/jquery-ui-1.10.3.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/user-highlights.css" type="text/css" />
    <link rel="stylesheet" href="../_static/runestone-custom-sphinx-bootstrap.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js_lib/prettify.js?v=-358176D8"></script>
    <script type="text/javascript" src="../_static/js_lib/hammer.min.js?v=73056367"></script>
    <script type="text/javascript" src="../_static/parsons.js?v=-6C1000C7"></script>
    <script type="text/javascript" src="../_static/timedparsons.js?v=2EEA9E5A"></script>
    <script type="text/javascript" src="../_static/runestonevideo.js?v=53E888DE"></script>
    <script type="text/javascript" src="../_static/d3.v2.min.js?v=836E01C"></script>
    <script type="text/javascript" src="../_static/jquery.ba-bbq.min.js?v=-49B30F58"></script>
    <script type="text/javascript" src="../_static/jquery.jsPlumb-1.3.10-all-min.js?v=42F9EBEA"></script>
    <script type="text/javascript" src="../_static/pytutor.js?v=-7D4FDD47"></script>
    <script type="text/javascript" src="../_static/codelens.js?v=-354132B7"></script>
    <script type="text/javascript" src="../_static/dragndrop.js?v=2B6403E8"></script>
    <script type="text/javascript" src="../_static/timeddnd.js?v=378F237E"></script>
    <script type="text/javascript" src="../_static/fitb.js?v=-71BF18ED"></script>
    <script type="text/javascript" src="../_static/timedfitb.js?v=2AA17071"></script>
    <script type="text/javascript" src="../_static/codemirror.js?v=-6B0AAD37"></script>
    <script type="text/javascript" src="../_static/xml.js?v=236EDFF7"></script>
    <script type="text/javascript" src="../_static/css.js?v=623153CE"></script>
    <script type="text/javascript" src="../_static/htmlmixed.js?v=33B91944"></script>
    <script type="text/javascript" src="../_static/javascript.js?v=6F38CA04"></script>
    <script type="text/javascript" src="../_static/webglinteractive.js?v=2B768384"></script>
    <script type="text/javascript" src="../_static/FileSaver.min.js?v=-7BF73669"></script>
    <script type="text/javascript" src="../_static/Blob.js?v=AEC2447"></script>
    <script type="text/javascript" src="../_static/skulpt.min.js?v=-238537EB"></script>
    <script type="text/javascript" src="../_static/skulpt-stdlib.js?v=48A5D93E"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@4.0.0-rc.2/build/vega.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@2.5.0/build/vega-lite.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@3.14.0/build/vega-embed.js"></script>
    <script type="text/javascript" src="../_static/datafile.js?v=3ED1A80C"></script>
    <script type="text/javascript" src="../_static/shortanswer.js?v=5EB6170D"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js?v=-4C5EE829"></script>
    <script type="text/javascript" src="../_static/tabbedstuff.js?v=5BE6106"></script>
    <script type="text/javascript" src="../_static/reveal.js?v=112CBFA2"></script>
    <script type="text/javascript" src="../_static/showEval.js?v=-3A31F37F"></script>
    <script type="text/javascript" src="../_static/jquery.highlight.js?v=-E3B6938"></script>
    <script type="text/javascript" src="../_static/bookfuncs.js?v=21EFC8E1"></script>
    <script type="text/javascript" src="../_static/python.js?v=14A28F1F"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/CLDRPluralRuleParser.js?v=599B42B0"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.js?v=-775EBCF1"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.messagestore.js?v=-51EA5B5F"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.fallbacks.js?v=-75420181"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.language.js?v=747279FF"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.parser.js?v=7B020E13"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.js?v=660E85C3"></script>
    <script type="text/javascript" src="../_static/jquery_i18n/jquery.i18n.emitter.bidi.js?v=54B21948"></script>
    <script type="text/javascript" src="../_static/activecode-i18n.en.js?v=3FBAE230"></script>
    <script type="text/javascript" src="../_static/activecode.js?v=-605A8C1F"></script>
    <script type="text/javascript" src="../_static/clike.js?v=2DCE0756"></script>
    <script type="text/javascript" src="../_static/timed_activecode.js?v=5150FA78"></script>
    <script type="text/javascript" src="../_static/mchoice.js?v=-7CD635AB"></script>
    <script type="text/javascript" src="../_static/timedmc.js?v=-4FEF5BA9"></script>
    <script type="text/javascript" src="../_static/timed.js?v=6789FE30"></script>
    <script type="text/javascript" src="../_static/matrixeq.js?v=-29B305A6"></script>
    <script type="text/javascript" src="../_static/animationbase.js?v=-5FBC3C59"></script>
    <script type="text/javascript" src="../_static/clickable.js?v=-6A9F19A2"></script>
    <script type="text/javascript" src="../_static/timedclickable.js?v=-6C6763DD"></script>
    <script type="text/javascript" src="../_static/poll.js?v=6C59AE9F"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.19. Resumen de implementaciones del TAD Vector Asociativo" href="ResumenDeImplementacionesDelTADVectorAsociativo.html" />
    <link rel="prev" title="6.17. Desempeño de un árbol AVL" href="DesempenoDeUnArbolAVL.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = 'https://runestone.academy' ? 'https://runestone.academy' : 'http://127.0.0.1:8000';
  eBookConfig.app = eBookConfig.host+'/runestone';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = 'pythoned';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "pre_spring";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = true;
  eBookConfig.python3 = true;
  eBookConfig.basecourse = 'pythoned';
  eBookConfig.runestone_version = '3.4.5';
</script>

<div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&status=0";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        <a class="brand-logo" style='background: transparent url("../_static/img/logo_small.png") no-repeat 0px 0px;' href="/runestone/default/user/login">&nbsp; </a>
        <a class="navbar-brand" href="../index.html">Solución de problemas con algoritmos y estructuras de datos</a>
      </div>
    </div>

    <div class="navbar-collapse collapse navbar-ex1-collapse">

      <ul class="nav navbar-nav navbar-right">

        <li class="divider-vertical"></li>

        <!-- social media dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-share-alt" style="opacity: 0.9"></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone" class="twitter-follow-button" data-show-count="true">Follow @iRunestone</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
                <div class="fb-like" data-href="https://www.facebook.com/RunestoneInteractive" data-send="false" data-layout="button_count" data-width="300" data-show-faces="false" data-font="arial"></div>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li>
        <!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html'>Table of Contents</a></li>
            
            <li><a href='/runestone/static/pythoned/genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='/runestone/default/courses'>Change Course</a></li>
            <!--
            <li class="divider"></li>
            <li><a href='https://runestone.academy/runestone/mygroup/initiateGroup' id="joinGroupLink">Join a Study Group</a></li>
            <li><a href='https://runestone.academy/runestone/mygroup/schedule' id="groupScheduleLink">Group Schedule</a></li>
            <li><a href='https://runestone.academy/runestone/mygroup/newschedule' id="newChapterLink">Schedule New Chapter</a></li>
            <li><a href='https://runestone.academy/runestone/mygroup/manageGroup' id="manageGroupLink">Manage Group</a></li> -->
			<li class="divider"></li>
            <li><a href='https://runestone.academy/runestone/admin/index'>Instructor's Page</a></li>
            <li><a href='https://runestone.academy/runestone/assignments/index'>Progress Page</a></li>
            <li class="divider"></li>
            <li><a href="https://runestone.academy/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="https://runestone.academy/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="https://runestone.academy/runestone/default/user/register" id="registerlink">Register</a></li>
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
          </ul>
        </li>
        <!-- end user account dropdown -->
        
        <li class="divider-vertical"></li>

        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='/runestone/static/pythoned/navhelp.html'>Navigation Help</a></li>
            <li><a href='/runestone/static/overview/instructor.html'>Help for Instructors</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=pythoned&page=ImplementacionDeUnArbolAVL'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>

      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          <li class="dropdown globaltoc-container">
  <a href="../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Cap&#237;tulos <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction/toctree.html">1. Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AlgorithmAnalysis/toctree.html">2. Análisis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BasicDS/toctree.html">3. Estructuras de datos básicas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Recursion/toctree.html">4. Recursividad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SortSearch/toctree.html">5. Ordenamiento y búsqueda</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="toctree.html">6. Árboles y algoritmos de árboles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Graphs/toctree.html">7. Grafos y algoritmos de grafos</a></li>
</ul>
</ul>
</li>
          <li class="divider-vertical"></li>
        
        <!--
        
          
  <li id="relations-prev" title="Previous Chapter - 6.17. Desempeño de un árbol AVL" data-toggle="tooltip">
    <a href="DesempenoDeUnArbolAVL.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - 6.19. Resumen de implementaciones del TAD Vector Asociativo' data-toggle="tooltip" >
    <a href="ResumenDeImplementacionesDelTADVectorAsociativo.html" >
      <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script type="text/javascript">
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  $('#relations-prev').tooltip(opts);
  $('#relations-next').tooltip(opts);
</script>
        -->
        
          <li></li>
        
      </ul>

    </div>
  </div>
</div>


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content">
  
  <div class="section" id="implementacion-de-un-arbol-avl">
<h1>6.18. Implementación de un árbol AVL<a class="headerlink" href="#implementacion-de-un-arbol-avl" title="Permalink to this headline">¶</a></h1>
<p>Ahora que hemos demostrado que mantener un árbol AVL en equilibrio va a ser una gran mejora de desempeño, veremos cómo vamos a aumentar el procedimiento para insertar una clave nueva en el árbol. Dado que todas las claves nuevas se insertan en el árbol como nodos hoja y que sabemos que el factor de equilibrio para una hoja nueva es cero, no hay nuevos requisitos para el nodo que se acaba de insertar. Pero una vez que se agrega la hoja nueva, debemos actualizar el factor de equilibrio de su padre. La forma en que esta hoja nueva afecta al factor de equilibrio del padre depende de si el nodo hoja es un hijo izquierdo o un hijo derecho. Si el nuevo nodo es un hijo derecho, el factor de equilibrio del padre se reducirá en uno. Si el nuevo nodo es un hijo izquierdo, entonces el factor de equilibrio del padre se incrementará en uno. Esta relación puede aplicarse recursivamente al abuelo del nuevo nodo, y posiblemente a cada antepasado hasta la raíz del árbol. Dado que se trata de un procedimiento recursivo, examinemos los dos casos base para actualizar los factores de equilibrio:</p>
<ul class="simple">
<li>La llamada recursiva ha llegado a la raíz del árbol.</li>
<li>El factor de equilibrio del padre ha sido ajustado a cero. Usted debe convencerse de que una vez que un subárbol tiene un factor de equilibrio cero, entonces el equilibrio de sus nodos ancestrales no cambia.</li>
</ul>
<p>Implementaremos el árbol AVL como una subclase de <code class="docutils literal notranslate"><span class="pre">ArbolBinarioBusqueda</span></code>. Para empezar, reescribiremos el método <code class="docutils literal notranslate"><span class="pre">_agregar</span></code> y escribiremos un nuevo método auxiliar <code class="docutils literal notranslate"><span class="pre">actualizarEquilibrio</span></code>. Estos métodos se muestran en el <a class="reference internal" href="#lst-updbal"><span class="std std-ref">Programa 1</span></a>. Usted notará que la definición de <code class="docutils literal notranslate"><span class="pre">_agregar</span></code> es exactamente la misma que en los árboles binarios de búsqueda simples, excepto porque se han incluido llamadas a <code class="docutils literal notranslate"><span class="pre">actualizarEquilibrio</span></code> en las líneas 7 y 13.</p>
<p><strong>Programa 1</strong></p>
<div class="highlight-python notranslate" id="lst-updbal"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">_agregar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">clave</span><span class="p">,</span><span class="n">valor</span><span class="p">,</span><span class="n">nodoActual</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">clave</span> <span class="o">&lt;</span> <span class="n">nodoActual</span><span class="o">.</span><span class="n">clave</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">nodoActual</span><span class="o">.</span><span class="n">tieneHijoIzquierdo</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_agregar</span><span class="p">(</span><span class="n">clave</span><span class="p">,</span><span class="n">valor</span><span class="p">,</span><span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoIzquierdo</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoIzquierdo</span> <span class="o">=</span> <span class="n">NodoArbol</span><span class="p">(</span><span class="n">clave</span><span class="p">,</span><span class="n">valor</span><span class="p">,</span><span class="n">padre</span><span class="o">=</span><span class="n">nodoActual</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actualizarEquilibrio</span><span class="p">(</span><span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoIzquierdo</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">nodoActual</span><span class="o">.</span><span class="n">tieneHijoDerecho</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_agregar</span><span class="p">(</span><span class="n">clave</span><span class="p">,</span><span class="n">valor</span><span class="p">,</span><span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoDerecho</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoDerecho</span> <span class="o">=</span> <span class="n">NodoArbol</span><span class="p">(</span><span class="n">clave</span><span class="p">,</span><span class="n">valor</span><span class="p">,</span><span class="n">padre</span><span class="o">=</span><span class="n">nodoActual</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actualizarEquilibrio</span><span class="p">(</span><span class="n">nodoActual</span><span class="o">.</span><span class="n">hijoDerecho</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">actualizarEquilibrio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodo</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">nodo</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reequilibrar</span><span class="p">(</span><span class="n">nodo</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">padre</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">esHijoIzquierdo</span><span class="p">():</span>
                <span class="n">nodo</span><span class="o">.</span><span class="n">padre</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">nodo</span><span class="o">.</span><span class="n">esHijoDerecho</span><span class="p">():</span>
                <span class="n">nodo</span><span class="o">.</span><span class="n">padre</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">padre</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">actualizarEquilibrio</span><span class="p">(</span><span class="n">nodo</span><span class="o">.</span><span class="n">padre</span><span class="p">)</span>
</pre></div>
</div>
<p>El nuevo método <code class="docutils literal notranslate"><span class="pre">actualizarEquilibrio</span></code> es donde se realiza la mayor parte del trabajo. Éste implementa el procedimiento recursivo que acabamos de describir. El método <code class="docutils literal notranslate"><span class="pre">actualizarEquilibrio</span></code> comprueba primero si el nodo actual está lo suficientemente desequilibrado como para requerir el reequilibrio (línea 16). Si ése es el caso, entonces se realiza el reequilibrio y no se requiere hacer ninguna nueva actualización a los padres. Si el nodo actual no requiere reequilibrio entonces se ajusta el factor de equilibrio del padre. Si el factor de equilibrio del padre no es cero, entonces el algoritmo continúa ascendiendo en el árbol, hacia la raíz, llamando recursivamente a <code class="docutils literal notranslate"><span class="pre">actualizarEquilibrio</span></code> con el padre como parámetro.</p>
<p>Cuando es necesario reequilibrar el árbol, ¿cómo lo hacemos? El reequilibrio eficiente es la clave para que el árbol AVL funcione bien sin sacrificar el desempeño. Con el fin de reequilibrar un árbol AVL vamos a realizar una o más <strong>rotaciones</strong> en el árbol.</p>
<p>Para entender lo que es una rotación, veamos un ejemplo muy simple. Considere el árbol mostrado en la mitad izquierda de la <a class="reference internal" href="#fig-unbalsimple"><span class="std std-ref">Figura 3</span></a>. Este árbol está desequilibrado con un factor de equilibrio de -2. Para equilibrar este árbol usaremos una rotación a la izquierda alrededor del subárbol con raíz en el nodo A.</p>
<div class="figure align-center" id="id1">
<span id="fig-unbalsimple"></span><img alt="../_images/simpleunbalanced.png" src="../_images/simpleunbalanced.png" />
<p class="caption"><span class="caption-text">Figura 3: Transformación de un árbol desequilibrado usando una rotación a la izquierda</span></p>
<div class="legend">
Figura 3: Transformación de un árbol desequilibrado usando una rotación a la izquierda</div>
</div>
<p>Para realizar una rotación a la izquierda, hacemos esencialmente lo siguiente:</p>
<ul class="simple">
<li>Promover el hijo derecho (B) para que sea la raíz del subárbol.</li>
<li>Mover la raíz antigua (A) para que sea el hijo izquierdo de la nueva raíz.</li>
<li>Si la nueva raíz (B) ya tenía un hijo izquierdo, entonces lo convertimos en el hijo derecho del nuevo hijo izquierdo (A). Nota: Dado que la nueva raíz (B) era el hijo derecho de A, está garantizado que el hijo derecho de A está vacío en este punto. Esto nos permite agregar un nuevo nodo como hijo derecho sin consideraciones adicionales.</li>
</ul>
<p>A pesar que este procedimiento es conceptualmente bastante sencillo, los detalles del código son un poco complicados ya que tenemos que mover cosas justo en el orden correcto para que todas las propiedades de un Árbol Binario de Búsqueda se conserven. Además debemos asegurarnos de actualizar apropiadamente todos los punteros de los padres.</p>
<p>Veamos un árbol un poco más complicado para ilustrar la rotación a la derecha. El lado izquierdo de la <a class="reference internal" href="#fig-rightrot1"><span class="std std-ref">Figura 4</span></a> muestra un árbol que es pesado a la izquierda y con un factor de equilibrio de 2 en la raíz. Para realizar una rotación a la derecha, hacemos esencialmente lo siguiente:</p>
<ul class="simple">
<li>Promover el hijo izquierdo (C) para que sea la raíz del subárbol.</li>
<li>Mover la raíz antigua (E) para que sea el hijo drecho de la nueva raíz.</li>
<li>Si la nueva raíz (C) ya tenía un hijo derecho (D), entonces lo convertimos en el hijo izquierdo del nuevo hijo derecho (E). Nota: Como la nueva raíz (C) era el hijo izquierdo de E, está garantizado que el hijo izquierdo de E está vacío en este punto. Esto nos permite agregar un nuevo nodo como hijo izquierdo sin consideraciones adicionales.</li>
</ul>
<div class="figure align-center" id="id2">
<span id="fig-rightrot1"></span><img alt="../_images/rightrotate1.png" src="../_images/rightrotate1.png" />
<p class="caption"><span class="caption-text">Figura 4: Transformación de un árbol desequilibrado usando una rotación a la derecha</span></p>
<div class="legend">
Figura 4: Transformación de un árbol desequilibrado usando una rotación a la derecha</div>
</div>
<p>Veamos el código ahora que usted ha visto las rotaciones y tiene la idea básica de cómo funciona una rotación. El <a class="reference internal" href="#lst-bothrotations"><span class="std std-ref">Programa 2</span></a> muestra el código para las rotaciones a la derecha y a la izquierda. En la línea 2 creamos una variable temporal para realizar un seguimiento de la nueva raíz del subárbol. Como dijimos antes, la nueva raíz es el hijo derecho de la raíz anterior. Ahora que se ha almacenado una referencia al hijo derecho en esta variable temporal, reemplazamos el hijo derecho de la raíz antigua con el hijo izquierdo de la nueva.</p>
<p>El siguiente paso es ajustar los punteros a los padres de los dos nodos. Si <code class="docutils literal notranslate"><span class="pre">nuevaRaiz</span></code> tiene un hijo izquierdo entonces el nuevo padre del hijo izquierdo se convierte en la raíz antigua. Al padre de la nueva raíz se le asigna el padre de la raíz antigua. Si la raíz antigua era la raíz de todo el árbol, debemos asignar la raíz del árbol para que apunte a esta nueva raíz. De lo contrario, si la raíz antigua es un hijo izquierdo, entonces cambiamos al padre del hijo izquierdo para que apunte a la nueva raíz; de lo contrario cambiamos al padre del hijo derecho para que apunte a la nueva raíz. (Líneas 10-13). Finalmente asignamos la nueva raíz como padre de la raíz antigua. Esto es un montón de contabilidad complicada, por lo que lo animamos a rastrear el funcionamiento de esta función mientras mira la <a class="reference internal" href="#fig-unbalsimple"><span class="std std-ref">Figura 3</span></a>. El método <code class="docutils literal notranslate"><span class="pre">rotarDerecha</span></code> es simétrico a <code class="docutils literal notranslate"><span class="pre">rotarIzquierda</span></code>, por lo que dejaremos que usted estudie por sí mismo el código de <code class="docutils literal notranslate"><span class="pre">rotarDerecha</span></code>.</p>
<p id="lst-bothrotations"><strong>Programa 2</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rotarIzquierda</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">rotRaiz</span><span class="p">):</span>
    <span class="n">nuevaRaiz</span> <span class="o">=</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">hijoDerecho</span>
    <span class="n">rotRaiz</span><span class="o">.</span><span class="n">hijoDerecho</span> <span class="o">=</span> <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">hijoIzquierdo</span>
    <span class="k">if</span> <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">hijoIzquierdo</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">hijoIzquierdo</span><span class="o">.</span><span class="n">padre</span> <span class="o">=</span> <span class="n">rotRaiz</span>
    <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">padre</span> <span class="o">=</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">padre</span>
    <span class="k">if</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">esRaiz</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raiz</span> <span class="o">=</span> <span class="n">nuevaRaiz</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">esHijoIzquierdo</span><span class="p">():</span>
                <span class="n">rotRaiz</span><span class="o">.</span><span class="n">padre</span><span class="o">.</span><span class="n">hijoIzquierdo</span> <span class="o">=</span> <span class="n">nuevaRaiz</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rotRaiz</span><span class="o">.</span><span class="n">padre</span><span class="o">.</span><span class="n">hijoDerecho</span> <span class="o">=</span> <span class="n">nuevaRaiz</span>
    <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">hijoIzquierdo</span> <span class="o">=</span> <span class="n">rotRaiz</span>
    <span class="n">rotRaiz</span><span class="o">.</span><span class="n">padre</span> <span class="o">=</span> <span class="n">nuevaRaiz</span>
    <span class="n">rotRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">=</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">=</span> <span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">rotRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Finalmente, las líneas 16-17 requieren cierta explicación. En estas dos líneas actualizamos los factores de equilibrio de las raíces vieja y nueva. Puesto que todos los otros movimientos están cambiando de lugar subárboles completos, los factores de equilibrio de todos los otros nodos no son afectados por la rotación. Pero, ¿cómo podemos actualizar los factores de equilibrio sin recalcular completamente las alturas de los nuevos subárboles? La siguiente derivación debería convencerlo a usted de que estas líneas son correctas.</p>
<div class="figure align-center" id="id3">
<span id="fig-bfderive"></span><img alt="../_images/bfderive.png" src="../_images/bfderive.png" />
<p class="caption"><span class="caption-text">Figura 5: Una rotación a la izquierda</span></p>
<div class="legend">
Figura 5: Una rotación a la izquierda</div>
</div>
<p>La <a class="reference internal" href="#fig-bfderive"><span class="std std-ref">Figura 5</span></a> muestra una rotación a la izquierda. B y D son los nodos pivotales y A, C, E son sus subárboles. Sea <span class="math notranslate nohighlight">\(h_x\)</span> la altura de un subárbol particular con raíz en el nodo <span class="math notranslate nohighlight">\(x\)</span>. Por definición sabemos lo siguiente:</p>
<div class="math notranslate nohighlight">
\[\begin{split}nuevoEquilibrio(B) = h_A - h_C \\
viejoEquilibrio(B) = h_A - h_D\end{split}\]</div>
<p>Pero sabemos que la altura antigua de D también puede estar dada por <span class="math notranslate nohighlight">\(1 + max (h_C, h_E)\)</span>, es decir, la altura de D es uno más la altura máxima entre aquéllas de sus dos hijos. Recuerde que <span class="math notranslate nohighlight">\(h_C\)</span> y <span class="math notranslate nohighlight">\(h_E\)</span> no han cambiado. Por lo tanto, sustituyamos esto en la segunda ecuación, lo que nos da</p>
<p><span class="math notranslate nohighlight">\(viejoEquilibrio(B) = h_A - (1 + max(h_C,h_E))\)</span></p>
<p>y luego restamos las dos ecuaciones. Los siguientes pasos hacen la resta y usan ciertas operaciones algebraicas para simplificar la ecuación de <span class="math notranslate nohighlight">\(nuevoEquilibrio(B)\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}nuevoEquilibrio(B) - viejoEquilibrio(B) = h_A - h_C - (h_A - (1 + max(h_C,h_E))) \\
nuevoEquilibrio(B) - viejoEquilibrio(B) = h_A - h_C - h_A + (1 + max(h_C,h_E)) \\
nuevoEquilibrio(B) - viejoEquilibrio(B) = h_A  - h_A + 1 + max(h_C,h_E) - h_C  \\
nuevoEquilibrio(B) - viejoEquilibrio(B) =  1 + max(h_C,h_E) - h_C\end{split}\]</div>
<p>A continuación vamos a mover <span class="math notranslate nohighlight">\(viejoEquilibrio(B)\)</span> al lado derecho de la ecuación y haremos uso del hecho de que <span class="math notranslate nohighlight">\(max(a,b) -c = max(a-c, b-c)\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}nuevoEquilibrio(B) = viejoEquilibrio(B) + 1 + max(h_C - h_C ,h_E - h_C) \\\end{split}\]</div>
<p>Pero, <span class="math notranslate nohighlight">\(h_E - h_C\)</span> es lo mismo que <span class="math notranslate nohighlight">\(-viejoEquilibrio(D)\)</span>. Así que podemos usar otra identidad que dice que <span class="math notranslate nohighlight">\(max(-a,-b) = -min(a,b)\)</span>. Así entonces, podemos terminar nuestra derivación de <span class="math notranslate nohighlight">\(nuevoEquilibrio(B)\)</span> con los siguientes pasos:</p>
<div class="math notranslate nohighlight">
\[\begin{split}nuevoEquilibrio(B) = viejoEquilibrio(B) + 1 + max(0, -viejoEquilibrio(D)) \\
nuevoEquilibrio(B) = viejoEquilibrio(B) + 1 - min(0, viejoEquilibrio(D)) \\\end{split}\]</div>
<p>Ahora tenemos todas las partes en términos que reconocemos fácilmente. Si recordamos que B es <code class="docutils literal notranslate"><span class="pre">rotRaiz</span></code> y D es <code class="docutils literal notranslate"><span class="pre">nuevaRaiz</span></code> entonces podemos ver que la ecuación anterior corresponde exactamente a la instrucción en la línea 16, o:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rotRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">=</span> <span class="n">rotRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nuevaRaiz</span><span class="o">.</span><span class="n">factorEquilibrio</span><span class="p">)</span>
</pre></div>
</div>
<p>Una derivación similar nos da la ecuación para el nodo actualizado D, así como los factores de equilibrio después de una rotación a la derecha. Los dejamos como ejercicios para usted.</p>
<p>Ahora usted podría pensar que hemos terminado. Sabemos cómo hacer nuestras rotaciones a izquierda y derecha, y sabemos cuándo debemos hacer una rotación a la izquierda o a la derecha, pero eche un vistazo a la <a class="reference internal" href="#fig-hardrotate"><span class="std std-ref">Figura 6</span></a>. Dado que el nodo A tiene un factor de equilibrio de -2, deberíamos hacer una rotación a la izquierda. Pero, ¿qué sucede cuando hacemos la rotación a la izquierda alrededor de A?</p>
<div class="figure align-center" id="id4">
<span id="fig-hardrotate"></span><img alt="../_images/hardunbalanced.png" src="../_images/hardunbalanced.png" />
<p class="caption"><span class="caption-text">Figura 6: Un árbol desequilibrado que es más difícil de equilibrar</span></p>
<div class="legend">
Figura 6: Un árbol desequilibrado que es más difícil de equilibrar</div>
</div>
<p>La <a class="reference internal" href="#fig-badrotate"><span class="std std-ref">Figura 7</span></a> nos muestra que, después de la rotación a la izquierda, estamos ahora desequilibrados en la otra dirección. Si hacemos una rotación a la derecha para corregir la situación, estamos de regreso en la situación con que empezamos.</p>
<div class="figure align-center" id="id5">
<span id="fig-badrotate"></span><img alt="../_images/badrotate.png" src="../_images/badrotate.png" />
<p class="caption"><span class="caption-text">Figura 7: Después de una rotación a la izquierda el árbol está desequilibrado en la otra dirección</span></p>
<div class="legend">
Figura 7: Después de una rotación a la izquierda el árbol está desequilibrado en la otra dirección</div>
</div>
<p>Para corregir este problema debemos utilizar el siguiente conjunto de reglas:</p>
<ul class="simple">
<li>Si un subárbol necesita una rotación a la izquierda para equilibrarlo, compruebe primero el factor de equilibrio del hijo derecho. Si el hijo derecho es pesado a la izquierda entonces aplique una rotación a la derecha al hijo derecho, seguida por la rotación a la izquierda original.</li>
<li>Si un subárbol necesita una rotación a la derecha para equilibrarlo, compruebe primero el factor de equilibrio del hijo izquierdo. Si el hijo izquierdo es pesado a la derecha, aplique una rotación a la izquierda al hijo izquierdo, seguida por la rotación a la derecha original.</li>
</ul>
<p>La <a class="reference internal" href="#fig-rotatelr"><span class="std std-ref">Figura 8</span></a> muestra cómo estas reglas resuelven el dilema que encontramos en la <a class="reference internal" href="#fig-hardrotate"><span class="std std-ref">Figura 6</span></a> y en la <a class="reference internal" href="#fig-badrotate"><span class="std std-ref">Figura 7</span></a>. Comenzar con una rotación a la derecha alrededor del nodo C pone el árbol en una posición en la que la rotación a la izquierda alrededor de A reequilibrará el subárbol completo.</p>
<div class="figure align-center" id="id6">
<span id="fig-rotatelr"></span><img alt="../_images/rotatelr.png" src="../_images/rotatelr.png" />
<p class="caption"><span class="caption-text">Figura 8: Una rotación a la derecha seguida de una rotación a la izquierda</span></p>
<div class="legend">
Figura 8: Una rotación a la derecha seguida de una rotación a la izquierda</div>
</div>
<p>El código que implementa estas reglas se puede encontrar en nuestro método <code class="docutils literal notranslate"><span class="pre">reequilibrar</span></code>, que se muestra en el <a class="reference internal" href="#lst-rebalance"><span class="std std-ref">Programa 3</span></a>. La regla número 1 desde arriba es implementada por la instrucción <code class="docutils literal notranslate"><span class="pre">if</span></code> empezando en la línea 2. La regla número 2 es implementada por la instrucción <code class="docutils literal notranslate"><span class="pre">elif</span></code> empezando en la línea 8.</p>
<p id="lst-rebalance"><strong>Programa 3</strong></p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">reequilibrar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodo</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
         <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">hijoDerecho</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarDerecha</span><span class="p">(</span><span class="n">nodo</span><span class="o">.</span><span class="n">hijoDerecho</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarIzquierda</span><span class="p">(</span><span class="n">nodo</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarIzquierda</span><span class="p">(</span><span class="n">nodo</span><span class="p">)</span>
  <span class="k">elif</span> <span class="n">nodo</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
         <span class="k">if</span> <span class="n">nodo</span><span class="o">.</span><span class="n">hijoIzquierdo</span><span class="o">.</span><span class="n">factorEquilibrio</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarIzquierda</span><span class="p">(</span><span class="n">nodo</span><span class="o">.</span><span class="n">hijoIzquierdo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarDerecha</span><span class="p">(</span><span class="n">nodo</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotarDerecha</span><span class="p">(</span><span class="n">nodo</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Las <a class="reference internal" href="PreguntasDeDiscusion.html#tree-discuss"><span class="std std-ref">preguntas de discusión</span></a> le dan a usted la oportunidad de reequilibrar un árbol que requiere una rotación a la izquierda seguida de una rotación a la derecha. Además, las preguntas de discusión le brindan la oportunidad de reequilibrar algunos árboles que son un poco más complejos que el árbol de la <a class="reference internal" href="#fig-rotatelr"><span class="std std-ref">Figura 8</span></a>.</p>
<p>Manteniendo el árbol equilibrado en todo momento, podemos asegurar que el método <code class="docutils literal notranslate"><span class="pre">obtener</span></code> se ejecutará en un tiempo del orden de <span class="math notranslate nohighlight">\(O(log_2(n))\)</span>. Pero la pregunta es ¿a qué costo para nuestro método <code class="docutils literal notranslate"><span class="pre">agregar</span></code>? Descompongamos esto en las operaciones realizadas por <code class="docutils literal notranslate"><span class="pre">agregar</span></code>. Puesto que un nuevo nodo se inserta como una hoja, la actualización de los factores de equilibrio de todos los padres requerirá un máximo de <span class="math notranslate nohighlight">\(log_2(n)\)</span> operaciones, una por cada nivel del árbol. Si un subárbol está desequilibrado, se requiere un máximo de dos rotaciones para reequilibrarlo el árbol. No obstante, cada una de las rotaciones funciona en tiempo <span class="math notranslate nohighlight">\(O(1)\)</span>, así que incluso nuestra operación <code class="docutils literal notranslate"><span class="pre">agregar</span></code> seguirá siendo <span class="math notranslate nohighlight">\(O(log_2(n))\)</span>.</p>
<p>En este punto hemos implementado un árbol AVL funcional, a menos que usted necesite la capacidad de eliminar un nodo. Dejamos la eliminación del nodo y su posterior actualización y reequilibrio como ejercicio para usted.</p>
</div>


  
      
  <li id="relations-prev" class="navLink" title='Previous Section - 6.17. Desempeño de un árbol AVL' data-toggle="tooltip">
    <a href="DesempenoDeUnArbolAVL.html" >
      <i class='prevNav glyphicon glyphicon-chevron-left'></i>
    </a>
  </li>
  <a class="navLinkBg" id="navLinkBgLeft"  href="DesempenoDeUnArbolAVL.html" ></a>
  
  <li id="relations-next" class="navLink" title='Next Section - 6.19. Resumen de implementaciones del TAD Vector Asociativo' data-toggle="tooltip" >
    <a href="ResumenDeImplementacionesDelTADVectorAsociativo.html" >
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right'></i>
    </a>
  </li>
  <a class="navLinkBg navLink" id="navLinkBgRight" href="ResumenDeImplementacionesDelTADVectorAsociativo.html" >Next Section - 6.19. Resumen de implementaciones del TAD Vector Asociativo</a>

<script type="text/javascript">

  $('#relations-prev').tooltip({'placement':'right', 'selector': '', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement':'left', 'selector': '', 'delay': { show: 100, hide: 50}});
  
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      <span id='numuserspan'></span> readers online now | <span class='loggedinuser'></span>
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014 Brad Miller, David Ranum.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> 3.4.5.
    </p>
  </div>
</footer>



<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32029811-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



  </body>
</html>